!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Audio=function(){function Audio(sepValue){_classCallCheck(this,Audio);this.ctx=new window.AudioContext||new window.webkitAudioContext,this.audio=document.getElementById("audio-file"),this.audioSrc=this.ctx.createMediaElementSource(this.audio),this.analyser=this.ctx.createAnalyser(),this.audioData=[],this.sepValue=sepValue,this.audioSrc.connect(this.analyser),this.audioSrc.connect(this.ctx.destination),this.frequencyData=new Uint8Array(this.analyser.frequencyBinCount),this.audio.play()}return _createClass(Audio,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.frequencyData),this.frequencyData}},{key:"getAudioData",value:function(){this.analyser.getByteFrequencyData(this.frequencyData);for(var frequencyArray=this.splitFrenquencyArray(this.frequencyData,this.sepValue),i=0;i<frequencyArray.length-100;i++){for(var average=0,j=0;j<frequencyArray[i].length;j++)average+=frequencyArray[i][j];this.audioData[i]=average/frequencyArray[i].length}return this.audioData}},{key:"splitFrenquencyArray",value:function(arr,n){for(var tab=Object.keys(arr).map(function(key){return arr[key]}),len=tab.length,result=[],i=0;len>i;){var size=Math.ceil((len-i)/n--);result.push(tab.slice(i,i+size)),i+=size}return result}}]),Audio}();exports.default=Audio},{}],2:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_scene=require("./scene/scene"),_scene2=_interopRequireDefault(_scene),_Audio=require("./Audio"),_Audio2=_interopRequireDefault(_Audio),_Plane=require("./objects/Plane"),_Plane2=_interopRequireDefault(_Plane),_Sphere=require("./objects/Sphere"),_Sphere2=_interopRequireDefault(_Sphere),_Torus=require("./objects/Torus"),_Torus2=_interopRequireDefault(_Torus),App=function(){function App(){_classCallCheck(this,App),this.DELTA_TIME=0,this.LAST_TIME=Date.now(),this.width=window.innerWidth,this.height=window.innerHeight,this.scene=new _scene2.default,this.audio=new _Audio2.default(435);var root=document.body.querySelector(".app");root.appendChild(this.scene.renderer.domElement),this.addSphere(),this.addTorus(),this.addListeners()}return _createClass(App,[{key:"addListeners",value:function(){window.addEventListener("resize",this.onResize.bind(this)),TweenMax.ticker.addEventListener("tick",this.update.bind(this))}},{key:"addPlane",value:function(){this.plane=new _Plane2.default,this.plane.position.set(0,0,0),this.scene.add(this.plane.mesh)}},{key:"addSphere",value:function(){this.sphere=new _Sphere2.default,this.sphere.position.set(0,0,0),this.scene.add(this.sphere.mesh)}},{key:"addTorus",value:function(){this.torus=new _Torus2.default,this.torus.position.set(0,0,0),this.scene.add(this.torus.mesh)}},{key:"update",value:function(){this.DELTA_TIME=Date.now()-this.LAST_TIME,this.LAST_TIME=Date.now();var audioData=this.audio.getAudioData();this.sphere.update(audioData),this.torus.update(audioData),this.scene.render()}},{key:"onResize",value:function(evt){this.width=window.innerWidth,this.height=window.innerHeight,this.scene.resize(this.width,this.height)}}]),App}();exports.default=App},{"./Audio":1,"./objects/Plane":3,"./objects/Sphere":4,"./objects/Torus":5,"./scene/scene":6}],3:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==("undefined"==typeof call?"undefined":_typeof(call))&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof superClass?"undefined":_typeof(superClass)));subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj};Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Plane=function(_THREE$Object3D){function Plane(){_classCallCheck(this,Plane);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Plane).call(this));_this.geometry=new THREE.BoxGeometry(700,700,700,8,8),_this.geometry.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2)),_this.geometry.mergeVertices(),_this.initalVertices=[];for(var i=0;i<_this.geometry.vertices.length;i++)_this.initalVertices[i]={},_this.initalVertices[i].x=_this.geometry.vertices[i].x,_this.initalVertices[i].y=_this.geometry.vertices[i].y,_this.initalVertices[i].z=_this.geometry.vertices[i].z;return _this.material=new THREE.MeshPhongMaterial({color:2691662,shading:THREE.FlatShading,shininess:50}),_this.mesh=new THREE.Mesh(_this.geometry,_this.material),_this.mesh.position.y=-300,_this}return _inherits(Plane,_THREE$Object3D),_createClass(Plane,[{key:"update",value:function(audioData){for(var i=0;i<this.geometry.vertices.length;i++)this.geometry.vertices[i].y=this.initalVertices[i].y*(audioData[i]/3e3);this.mesh.geometry.verticesNeedUpdate=!0}}]),Plane}(THREE.Object3D);exports.default=Plane},{}],4:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==("undefined"==typeof call?"undefined":_typeof(call))&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof superClass?"undefined":_typeof(superClass)));subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj};Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Sphere=function(_THREE$Object3D){function Sphere(){_classCallCheck(this,Sphere);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Sphere).call(this));_this.geometry=new THREE.SphereGeometry(800,35,35),_this.geometry.mergeVertices(),_this.initalVertices=[];for(var i=0;i<_this.geometry.vertices.length;i++)_this.initalVertices[i]={},_this.initalVertices[i].x=_this.geometry.vertices[i].x,_this.initalVertices[i].y=_this.geometry.vertices[i].y,_this.initalVertices[i].z=_this.geometry.vertices[i].z;return _this.material=new THREE.MeshPhongMaterial({color:3988956,shading:THREE.FlatShading,shininess:50}),_this.mesh=new THREE.Mesh(_this.geometry,_this.material),_this.mesh.position.y=-300,_this}return _inherits(Sphere,_THREE$Object3D),_createClass(Sphere,[{key:"update",value:function(audioData){this.mesh.rotation.y+=.03;for(var i=0;i<this.geometry.vertices.length;i++)this.geometry.vertices[i].x=this.initalVertices[i].x*(audioData[i]/200),this.geometry.vertices[i].y=this.initalVertices[i].y*(audioData[i]/300),this.geometry.vertices[i].z=this.initalVertices[i].z*(audioData[i]/200);this.mesh.geometry.verticesNeedUpdate=!0}}]),Sphere}(THREE.Object3D);exports.default=Sphere},{}],5:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==("undefined"==typeof call?"undefined":_typeof(call))&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof superClass?"undefined":_typeof(superClass)));subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj};Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Torus=function(_THREE$Object3D){function Torus(){_classCallCheck(this,Torus);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Torus).call(this));_this.geometry=new THREE.TorusGeometry(100,40,10,10),_this.geometry.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2)),_this.geometry.mergeVertices(),_this.initalVertices=[];for(var i=0;i<_this.geometry.vertices.length;i++)_this.initalVertices[i]={},_this.initalVertices[i].x=_this.geometry.vertices[i].x,_this.initalVertices[i].y=_this.geometry.vertices[i].y,_this.initalVertices[i].z=_this.geometry.vertices[i].z;return _this.material=new THREE.MeshPhongMaterial({color:10189036,shading:THREE.FlatShading,shininess:50}),_this.mesh=new THREE.Mesh(_this.geometry,_this.material),_this.mesh.position.y=-260,_this}return _inherits(Torus,_THREE$Object3D),_createClass(Torus,[{key:"update",value:function(audioData){for(var i=0;i<this.geometry.vertices.length;i++)this.geometry.vertices[i].y=this.initalVertices[i].y*(audioData[i]/100);this.mesh.geometry.verticesNeedUpdate=!0}}]),Torus}(THREE.Object3D);exports.default=Torus},{}],6:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),OrbitControls=require("three-orbit-controls")(THREE),Scene=function(){function Scene(){_classCallCheck(this,Scene),this.width=window.innerWidth,this.height=window.innerHeight,this.renderer=new THREE.WebGLRenderer(this.width,this.height,{antialias:!0}),this.renderer.setClearColor(1513239,1),this.camera=new THREE.PerspectiveCamera(45,this.width/this.height,1,2e3),this.controls=new OrbitControls(this.camera),this.scene=new THREE.Scene;var ambientLight=new THREE.AmbientLight(11184810);this.scene.add(ambientLight);var lights=[];lights[0]=new THREE.PointLight(16777215,1,300),lights[1]=new THREE.PointLight(16777215,1,0),lights[2]=new THREE.PointLight(16777215,1,0),lights[3]=new THREE.PointLight(16777215,1,0),lights[0].position.set(0,350,0),lights[1].position.set(100,200,100),lights[2].position.set(-100,-200,-100),lights[3].position.set(0,-500,0),this.pointLightHelpers=[];for(var i=0;4>i;i++)this.scene.add(lights[i]);this.renderer.setSize(this.width,this.height),this.camera.position.z=1e3}return _createClass(Scene,[{key:"add",value:function(child){this.scene.add(child)}},{key:"remove",value:function(child){this.scene.remove(child)}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"resize",value:function(newWidth,newHeight){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(newWidth,newHeight)}}]),Scene}();exports.default=Scene},{"three-orbit-controls":8}],7:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _app=require("./app"),_app2=_interopRequireDefault(_app);window.log=window.console.log,window.trace=window.console.trace;new _app2.default},{"./app":2}],8:[function(require,module,exports){module.exports=function(THREE){function OrbitConstraint(object){this.object=object,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25;var theta,phi,scope=this,EPS=1e-6,phiDelta=0,thetaDelta=0,scale=1,panOffset=new THREE.Vector3,zoomChanged=!1;this.getPolarAngle=function(){return phi},this.getAzimuthalAngle=function(){return theta},this.rotateLeft=function(angle){thetaDelta-=angle},this.rotateUp=function(angle){phiDelta-=angle},this.panLeft=function(){var v=new THREE.Vector3;return function(distance){var te=this.object.matrix.elements;v.set(te[0],te[1],te[2]),v.multiplyScalar(-distance),panOffset.add(v)}}(),this.panUp=function(){var v=new THREE.Vector3;return function(distance){var te=this.object.matrix.elements;v.set(te[4],te[5],te[6]),v.multiplyScalar(distance),panOffset.add(v)}}(),this.pan=function(deltaX,deltaY,screenWidth,screenHeight){if(scope.object instanceof THREE.PerspectiveCamera){var position=scope.object.position,offset=position.clone().sub(scope.target),targetDistance=offset.length();targetDistance*=Math.tan(scope.object.fov/2*Math.PI/180),scope.panLeft(2*deltaX*targetDistance/screenHeight),scope.panUp(2*deltaY*targetDistance/screenHeight)}else scope.object instanceof THREE.OrthographicCamera?(scope.panLeft(deltaX*(scope.object.right-scope.object.left)/screenWidth),scope.panUp(deltaY*(scope.object.top-scope.object.bottom)/screenHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(dollyScale){scope.object instanceof THREE.PerspectiveCamera?scale/=dollyScale:scope.object instanceof THREE.OrthographicCamera?(scope.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*dollyScale)),scope.object.updateProjectionMatrix(),zoomChanged=!0):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.dollyOut=function(dollyScale){scope.object instanceof THREE.PerspectiveCamera?scale*=dollyScale:scope.object instanceof THREE.OrthographicCamera?(scope.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/dollyScale)),scope.object.updateProjectionMatrix(),zoomChanged=!0):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.update=function(){var offset=new THREE.Vector3,quat=(new THREE.Quaternion).setFromUnitVectors(object.up,new THREE.Vector3(0,1,0)),quatInverse=quat.clone().inverse(),lastPosition=new THREE.Vector3,lastQuaternion=new THREE.Quaternion;return function(){var position=this.object.position;offset.copy(position).sub(this.target),offset.applyQuaternion(quat),theta=Math.atan2(offset.x,offset.z),phi=Math.atan2(Math.sqrt(offset.x*offset.x+offset.z*offset.z),offset.y),theta+=thetaDelta,phi+=phiDelta,theta=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,theta)),phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,phi)),phi=Math.max(EPS,Math.min(Math.PI-EPS,phi));var radius=offset.length()*scale;return radius=Math.max(this.minDistance,Math.min(this.maxDistance,radius)),this.target.add(panOffset),offset.x=radius*Math.sin(phi)*Math.sin(theta),offset.y=radius*Math.cos(phi),offset.z=radius*Math.sin(phi)*Math.cos(theta),offset.applyQuaternion(quatInverse),position.copy(this.target).add(offset),this.object.lookAt(this.target),this.enableDamping===!0?(thetaDelta*=1-this.dampingFactor,phiDelta*=1-this.dampingFactor):(thetaDelta=0,phiDelta=0),scale=1,panOffset.set(0,0,0),zoomChanged||lastPosition.distanceToSquared(this.object.position)>EPS||8*(1-lastQuaternion.dot(this.object.quaternion))>EPS?(lastPosition.copy(this.object.position),lastQuaternion.copy(this.object.quaternion),zoomChanged=!1,!0):!1}}()}function OrbitControls(object,domElement){function pan(deltaX,deltaY){var element=scope.domElement===document?scope.domElement.body:scope.domElement;constraint.pan(deltaX,deltaY,element.clientWidth,element.clientHeight)}function getAutoRotationAngle(){return 2*Math.PI/60/60*scope.autoRotateSpeed}function getZoomScale(){return Math.pow(.95,scope.zoomSpeed)}function onMouseDown(event){if(scope.enabled!==!1){if(event.preventDefault(),event.button===scope.mouseButtons.ORBIT){if(scope.enableRotate===!1)return;state=STATE.ROTATE,rotateStart.set(event.clientX,event.clientY)}else if(event.button===scope.mouseButtons.ZOOM){if(scope.enableZoom===!1)return;state=STATE.DOLLY,dollyStart.set(event.clientX,event.clientY)}else if(event.button===scope.mouseButtons.PAN){if(scope.enablePan===!1)return;state=STATE.PAN,panStart.set(event.clientX,event.clientY)}state!==STATE.NONE&&(document.addEventListener("mousemove",onMouseMove,!1),document.addEventListener("mouseup",onMouseUp,!1),scope.dispatchEvent(startEvent))}}function onMouseMove(event){if(scope.enabled!==!1){event.preventDefault();var element=scope.domElement===document?scope.domElement.body:scope.domElement;if(state===STATE.ROTATE){if(scope.enableRotate===!1)return;rotateEnd.set(event.clientX,event.clientY),rotateDelta.subVectors(rotateEnd,rotateStart),constraint.rotateLeft(2*Math.PI*rotateDelta.x/element.clientWidth*scope.rotateSpeed),constraint.rotateUp(2*Math.PI*rotateDelta.y/element.clientHeight*scope.rotateSpeed),rotateStart.copy(rotateEnd)}else if(state===STATE.DOLLY){if(scope.enableZoom===!1)return;dollyEnd.set(event.clientX,event.clientY),dollyDelta.subVectors(dollyEnd,dollyStart),dollyDelta.y>0?constraint.dollyIn(getZoomScale()):dollyDelta.y<0&&constraint.dollyOut(getZoomScale()),dollyStart.copy(dollyEnd)}else if(state===STATE.PAN){if(scope.enablePan===!1)return;panEnd.set(event.clientX,event.clientY),panDelta.subVectors(panEnd,panStart),pan(panDelta.x,panDelta.y),panStart.copy(panEnd)}state!==STATE.NONE&&scope.update()}}function onMouseUp(){scope.enabled!==!1&&(document.removeEventListener("mousemove",onMouseMove,!1),document.removeEventListener("mouseup",onMouseUp,!1),scope.dispatchEvent(endEvent),state=STATE.NONE)}function onMouseWheel(event){if(scope.enabled!==!1&&scope.enableZoom!==!1&&state===STATE.NONE){event.preventDefault(),event.stopPropagation();var delta=0;void 0!==event.wheelDelta?delta=event.wheelDelta:void 0!==event.detail&&(delta=-event.detail),delta>0?constraint.dollyOut(getZoomScale()):0>delta&&constraint.dollyIn(getZoomScale()),scope.update(),scope.dispatchEvent(startEvent),scope.dispatchEvent(endEvent)}}function onKeyDown(event){if(scope.enabled!==!1&&scope.enableKeys!==!1&&scope.enablePan!==!1)switch(event.keyCode){case scope.keys.UP:pan(0,scope.keyPanSpeed),scope.update();break;case scope.keys.BOTTOM:pan(0,-scope.keyPanSpeed),scope.update();break;case scope.keys.LEFT:pan(scope.keyPanSpeed,0),scope.update();break;case scope.keys.RIGHT:pan(-scope.keyPanSpeed,0),scope.update()}}function touchstart(event){if(scope.enabled!==!1){switch(event.touches.length){case 1:if(scope.enableRotate===!1)return;state=STATE.TOUCH_ROTATE,rotateStart.set(event.touches[0].pageX,event.touches[0].pageY);break;case 2:if(scope.enableZoom===!1)return;state=STATE.TOUCH_DOLLY;var dx=event.touches[0].pageX-event.touches[1].pageX,dy=event.touches[0].pageY-event.touches[1].pageY,distance=Math.sqrt(dx*dx+dy*dy);dollyStart.set(0,distance);break;case 3:if(scope.enablePan===!1)return;state=STATE.TOUCH_PAN,panStart.set(event.touches[0].pageX,event.touches[0].pageY);break;default:state=STATE.NONE}state!==STATE.NONE&&scope.dispatchEvent(startEvent)}}function touchmove(event){if(scope.enabled!==!1){event.preventDefault(),event.stopPropagation();var element=scope.domElement===document?scope.domElement.body:scope.domElement;switch(event.touches.length){case 1:if(scope.enableRotate===!1)return;if(state!==STATE.TOUCH_ROTATE)return;rotateEnd.set(event.touches[0].pageX,event.touches[0].pageY),rotateDelta.subVectors(rotateEnd,rotateStart),constraint.rotateLeft(2*Math.PI*rotateDelta.x/element.clientWidth*scope.rotateSpeed),constraint.rotateUp(2*Math.PI*rotateDelta.y/element.clientHeight*scope.rotateSpeed),rotateStart.copy(rotateEnd),scope.update();break;case 2:if(scope.enableZoom===!1)return;if(state!==STATE.TOUCH_DOLLY)return;var dx=event.touches[0].pageX-event.touches[1].pageX,dy=event.touches[0].pageY-event.touches[1].pageY,distance=Math.sqrt(dx*dx+dy*dy);dollyEnd.set(0,distance),dollyDelta.subVectors(dollyEnd,dollyStart),dollyDelta.y>0?constraint.dollyOut(getZoomScale()):dollyDelta.y<0&&constraint.dollyIn(getZoomScale()),dollyStart.copy(dollyEnd),scope.update();break;case 3:if(scope.enablePan===!1)return;if(state!==STATE.TOUCH_PAN)return;panEnd.set(event.touches[0].pageX,event.touches[0].pageY),panDelta.subVectors(panEnd,panStart),pan(panDelta.x,panDelta.y),panStart.copy(panEnd),scope.update();break;default:state=STATE.NONE}}}function touchend(){scope.enabled!==!1&&(scope.dispatchEvent(endEvent),state=STATE.NONE)}function contextmenu(event){event.preventDefault()}var constraint=new OrbitConstraint(object);this.domElement=void 0!==domElement?domElement:document,Object.defineProperty(this,"constraint",{get:function(){return constraint}}),this.getPolarAngle=function(){return constraint.getPolarAngle()},this.getAzimuthalAngle=function(){return constraint.getAzimuthalAngle()},this.enabled=!0,this.center=this.target,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT};var scope=this,rotateStart=new THREE.Vector2,rotateEnd=new THREE.Vector2,rotateDelta=new THREE.Vector2,panStart=new THREE.Vector2,panEnd=new THREE.Vector2,panDelta=new THREE.Vector2,dollyStart=new THREE.Vector2,dollyEnd=new THREE.Vector2,dollyDelta=new THREE.Vector2,STATE={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},state=STATE.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom;var changeEvent={type:"change"},startEvent={type:"start"},endEvent={type:"end"};this.update=function(){this.autoRotate&&state===STATE.NONE&&constraint.rotateLeft(getAutoRotationAngle()),constraint.update()===!0&&this.dispatchEvent(changeEvent)},this.reset=function(){state=STATE.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(changeEvent),this.update()},this.dispose=function(){this.domElement.removeEventListener("contextmenu",contextmenu,!1),this.domElement.removeEventListener("mousedown",onMouseDown,!1),this.domElement.removeEventListener("mousewheel",onMouseWheel,!1),this.domElement.removeEventListener("MozMousePixelScroll",onMouseWheel,!1),this.domElement.removeEventListener("touchstart",touchstart,!1),this.domElement.removeEventListener("touchend",touchend,!1),this.domElement.removeEventListener("touchmove",touchmove,!1),document.removeEventListener("mousemove",onMouseMove,!1),document.removeEventListener("mouseup",onMouseUp,!1),window.removeEventListener("keydown",onKeyDown,!1)},this.domElement.addEventListener("contextmenu",contextmenu,!1),this.domElement.addEventListener("mousedown",onMouseDown,!1),this.domElement.addEventListener("mousewheel",onMouseWheel,!1),this.domElement.addEventListener("MozMousePixelScroll",onMouseWheel,!1),this.domElement.addEventListener("touchstart",touchstart,!1),this.domElement.addEventListener("touchend",touchend,!1),this.domElement.addEventListener("touchmove",touchmove,!1),window.addEventListener("keydown",onKeyDown,!1),this.update()}var MOUSE=THREE.MOUSE;return MOUSE||(MOUSE={LEFT:0,MIDDLE:1,RIGHT:2}),OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),OrbitControls.prototype.constructor=OrbitControls,Object.defineProperties(OrbitControls.prototype,{object:{get:function(){return this.constraint.object}},target:{get:function(){return this.constraint.target},set:function(value){console.warn("THREE.OrbitControls: target is now immutable. Use target.set() instead."),this.constraint.target.copy(value)}},minDistance:{get:function(){return this.constraint.minDistance},set:function(value){this.constraint.minDistance=value}},maxDistance:{get:function(){return this.constraint.maxDistance},set:function(value){this.constraint.maxDistance=value}},minZoom:{get:function(){return this.constraint.minZoom},set:function(value){this.constraint.minZoom=value}},maxZoom:{get:function(){return this.constraint.maxZoom},set:function(value){this.constraint.maxZoom=value}},minPolarAngle:{get:function(){return this.constraint.minPolarAngle},set:function(value){this.constraint.minPolarAngle=value}},maxPolarAngle:{get:function(){return this.constraint.maxPolarAngle},set:function(value){this.constraint.maxPolarAngle=value}},minAzimuthAngle:{get:function(){return this.constraint.minAzimuthAngle},set:function(value){this.constraint.minAzimuthAngle=value}},maxAzimuthAngle:{get:function(){return this.constraint.maxAzimuthAngle},set:function(value){this.constraint.maxAzimuthAngle=value}},enableDamping:{get:function(){return this.constraint.enableDamping},set:function(value){this.constraint.enableDamping=value}},dampingFactor:{get:function(){return this.constraint.dampingFactor},set:function(value){this.constraint.dampingFactor=value}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(value){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!value}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(value){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!value}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(value){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!value}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(value){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!value}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.constraint.enableDamping},set:function(value){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.constraint.enableDamping=!value}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor},set:function(value){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor=value}}}),OrbitControls}},{}]},{},[7]);